<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>母音サンディクイズ</title>
  <style>
    body {
      font-family: 'Segoe UI', 'Hiragino Kaku Gothic ProN', sans-serif;
      padding: 20px;
      max-width: 600px;
      margin: auto;
      background: #f8f9fa;
    }
    h1 {
      text-align: center;
      color: #1e88e5;
      margin-bottom: 30px;
      font-size: 2.2em;
      font-weight: bold;
    }
    .question {
      font-size: 1.4em;
      margin-bottom: 20px;
      background-color: #ffffff;
      padding: 15px;
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
      border-left: 5px solid #2196f3;
    }
    .options {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
    }
    .options button {
      cursor: pointer;
      font-size: 1.2em;
      padding: 12px 24px;
      border: none;
      border-radius: 6px;
      background: linear-gradient(to right, #64b5f6, #42a5f5);
      color: white;
      box-shadow: 0 2px 4px rgba(0,0,0,0.2);
      width: 80%;
      max-width: 450px;
    }
    .options button:hover {
      background: linear-gradient(to right, #42a5f5, #2196f3);
      transform: scale(1.03);
    }
    .explanation {
      background: #e3f2fd;
      padding: 10px;
      margin-top: 15px;
      border-left: 4px solid #42a5f5;
      border-radius: 4px;
    }
    .correct { background: #66bb6a !important; }
    .incorrect { background: #ef5350 !important; }
    .score {
      margin-top: 10px;
      font-size: 1em;
      color: #333;
      text-align: center;
    }
    .next-btn {
      display: block;
      margin: 30px auto 0;
      background-color: #42a5f5;
      color: white;
      border: none;
      border-radius: 8px;
      padding: 14px 28px;
      text-align: center;
      font-size: 1.2em;
      cursor: pointer;
    }
    .next-btn:hover {
      background-color: #1e88e5;
    }
    .back-to-menu {
      text-align: center;
      margin-top: 40px;
    }
    .back-to-menu button {
      background-color: #9e9e9e;
      color: white;
      padding: 12px 24px;
      border: none;
      border-radius: 8px;
      font-size: 1.1em;
      cursor: pointer;
    }
    .back-to-menu button:hover {
      background-color: #757575;
    }
  </style>
</head>
<body>
  <h1>母音サンディクイズ</h1>
  <div id="quiz"></div>
  <button class="next-btn" onclick="showNextQuestion()">次へ</button>
  <div class="back-to-menu">
    <button onclick="location.href='index.html'">メニューに戻る</button>
  </div>
  <script>
    const quizEl = document.getElementById('quiz');
    let index = 0;
    let correctCount = 0;
    const shuffle = (arr) => arr.sort(() => Math.random() - 0.5);

    const questions = shuffle([
  { question: "na asti (न असति) → ______", options: ["naasti (नास्ति)", "nāsti (नास्ति)", "nāāsti (नाआस्ति)"], answer: 1, explanation: "-a (अ) + a (अ) は ā (आ) に融合する。したがって b) nāsti (नास्ति) が正解。" },
  { question: "sā api (सा अपि) → ______", options: ["sāpi (सापि)", "sāāpi (साआपि)", "saapi (सापि)"], answer: 0, explanation: "-ā (आ) + a (अ) は ā (आ) に融合する。したがって a) sāpi (सापि) が正解。" },
  { question: "asti iha (अस्ति इह) → ______", options: ["astīha (अस्तीह)", "astiha (अस्तिह)", "astiīha (अस्तीीह)"], answer: 0, explanation: "-i (इ) + ī (ई) は ī (ई) に融合。したがって a) astīha (अस्तीह) が正解。" },
  { question: "sādhu uktam (साधु उक्तम्) → ______", options: ["sādhuuktam (साधुउक्तम्)", "sādhūktam (साधूक्तम्)", "sādhvuktam (साध्वुक्तम्)"], answer: 1, explanation: "-u (उ) + u (उ) は ū (ऊ) に融合する。したがって b) sādhūktam (साधूक्तम्) が正解。" },
  { question: "kartṛ ṛju (कर्तृ ऋजु) → ______", options: ["kartr̥ju (कर्तृजु)", "kartṛṛju (कर्तृऋजु)", "kartṝju (कर्तॄजु)"], answer: 2, explanation: "-ṛ (ऋ) + ṛ (ऋ) は ṝ (ॠ) に融合。したがって c) kartṝju (कर्तॄजु) が正解。" },
  { question: "tava icchā (तव इच्छा) → ______", options: ["tavecchā (तवेच्छा)", "tavaicchā (तवैच्छा)", "tavicchā (तविच्छा)"], answer: 0, explanation: "-a (अ) + i (इ) は e (ए) に融合する。したがって a) tavecchā (तवेच्छा) が正解。" },
  { question: "sā uktvā (सा उक्त्वा) → ______", options: ["soktvā (सोक्त्वा)", "sāuktvā (साउक्त्वा)", "sāoktvā (साऑक्त्वा)"], answer: 0, explanation: "-ā (आ) + u (उ) は o (ओ) に融合する。したがって a) soktvā (सोक्त्वा) が正解。" },
  { question: "yathā ṛtu (यथा ऋतु) → ______", options: ["yathartu (यथर्तु)", "yathārṭu (यथार्टु)", "yatharitu (यथरितु)"], answer: 0, explanation: "-ā (आ) + ṛ (ऋ) は ar (अर्ज्ञ) に融合する。したがって a) yathartu (यथर्तु) が正解。" },
  { question: "tava eva (तव एव) → ______", options: ["tavaiva (तवैव)", "taveva (तवेव)", "tavāeva (तवाऽएव)"], answer: 0, explanation: "-a (अ) + e (ए) は ai (ऐ) に融合する。したがって a) tavaiva (तवैव) が正解。" },
  { question: "tava aiśvaryam (तव ऐश्वर्यम्) → ______", options: ["tavaaiśvaryam (तवऐश्वर्यम्)", "tavaiśvaryam (तवैश्वर्यम्)", "tavāiśvaryam (तवाऐश्वर्यम्)"], answer: 1, explanation: "-ā (आ) + ai (ऐ) は ai (ऐ) に保持される。したがって b) tavaiśvaryam (तवैश्वर्यम्) が正解。" },
  { question: "sā oṣadhiḥ (सा ओषधिः) → ______", options: ["sauṣadhiḥ (सौषधिः)", "sāoṣadhiḥ (साओषधिः)", "sa oṣadhiḥ (स ओषधिः)"], answer: 0, explanation: "-ā (आ) + o (ओ) は au (औ) に融合する。したがって a) sauṣadhiḥ (सौषधिः) が正解。" },
  { question: "tasya autsukyam (तस्य औत्सुक्यम्) → ______", options: ["tasyautsukyam (तस्यौत्सुक्यम्)", "tasyaautsukyam (तस्यऔत्सुक्यम्)", "tasyāoutsukyam (तस्याौत्सुक्यम्)"], answer: 0, explanation: "-ā (आ) + au (औ) は au (औ) に融合する。したがって a) tasyautsukyam (तस्यौत्सुक्यम्) が正解。" },
  { question: "nadī eva (नदी एव) → ______", options: ["nadyeva (नद्येव)", "nadīeva (नदीएव)", "nadiveva (नदिवेव)"], answer: 0, explanation: "-ī (ई) + 母音 は y (य) に半母音化。したがって a) nadyeva (नद्येव) が正解。" },
  { question: "madhu iva (मधु इव) → ______", options: ["madhviva (मध्विव)", "madhuiva (मधुइव)", "madhūiva (मधूइव)"], answer: 0, explanation: "-ū (ऊ) + 母音 は v (व) に半母音化。したがって a) madhviva (मध्विव) が正解。" },
  { question: "kartṛ asti (कर्तृ अस्ति) → ______", options: ["kartr asti (कर्त्र अस्ति)", "kartṛasti (कर्तृअस्ति)", "kartra asti (कर्त्रअस्ति)"], answer: 0, explanation: "-ṛ (ऋ) + 母音 は r (र्) に半母音化。したがって a) kartr asti (कर्त्र अस्ति) が正解。" },
  { question: "te api (ते अपि) → ______", options: ["teʼpi (तेऽपि)", "tepi (तेपि)", "te api (ते अपि)"], answer: 0, explanation: "-e (ए) + a (अ) は a 脱落しアヴァグラハ（ʼ／ऽ）で表記。したがって a) teʼpi (तेऽपि) が正解。" },
  { question: "prabho atra (प्रभो अत्र) → ______", options: ["prabhoʼtra (प्रभोऽत्र)", "prabhoatra (प्रभोअत्र)", "prabhātra (प्रभात्र)"], answer: 0, explanation: "-o (ओ) + a (अ) は a 脱落しアヴァグラハ（ʼ／ऽ）で表記。したがって a) prabhoʼtra (प्रभोऽत्र) が正解。" },
  { question: "tau ubhau api (तौ उभौ अपि) → ______", options: ["tāv ubhāv api (ताव उभाव् अपि)", "tau ubhauapi (तौ उभौअपि)", "tāubhāv api (तौभाव् अपि)"], answer: 0, explanation: "この変化は2段階あります：1) tau → tāv（語形変化）, 2) ubhau + api は au (औ) + a (अ) の母音サンディで āv (आव्) になります。したがって a) tāv ubhāv api (ताव उभाव् अपि) が正解。" }
    ]);

    function showQuestion() {
      quizEl.innerHTML = '';
      const q = questions[index];
      const shuffledOptions = shuffle([...q.options]);
      quizEl.innerHTML += `<div class='question'>Q${index + 1}: ${q.question}</div>`;
      quizEl.innerHTML += `<div class='options'>${shuffledOptions.map((opt, i) => `<button onclick='selectAnswer(this, "${opt}", "${q.options[q.answer]}", ${i})'>${String.fromCharCode(97+i)}) ${opt}</button>`).join('')}</div>`;
      quizEl.innerHTML += `<div class='score'>正解数: ${correctCount} / ${questions.length}</div>`;
    }

    function selectAnswer(button, selected, correct) {
      const buttons = document.querySelectorAll(".options button");
      buttons.forEach(b => b.disabled = true);
      if (selected === correct) {
        button.classList.add("correct");
        correctCount++;
      } else {
        button.classList.add("incorrect");
        buttons.forEach(b => {
          if (b.textContent.includes(correct)) b.classList.add("correct");
        });
      }
      const explanation = questions[index].explanation;
      quizEl.innerHTML += `<div class='explanation'>${explanation}</div>`;
    }

    function showNextQuestion() {
      if (index < questions.length - 1) {
        index++;
        showQuestion();
      } else {
        quizEl.innerHTML = `<div class='result green'>お疲れさまです。 ${questions.length}問中、${correctCount}問正解です！</div>`;
        document.querySelector(".next-btn").style.display = "none";
      }
    }

    showQuestion();
  </script>
</body>
</html>
